<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments/layout :: head(title = 'Profile')">
        <title>User Profile</title>
        <meta charset="UTF-8"/>
    </head>
    <body>
        <div class="container">
            <div th:replace="fragments/layout :: navbar"></div>
            <div th:replace="${notification} ? ~{fragments/layout :: note(notification=${notification})} : _"></div>

            <div class="row">
                <div class="col-sm-4">
                    <div class="profile-pic" style="height: 200px; background: #aaa;"></div>
                    <h5 th:text="${firstname + ' ' + lastname}">First and last name</h5>
                    <div class="list-group">
                        <button class="list-group-item list-group-item-action" data-toggle="modal" data-target="#myModal">Following <span id="followingAmount" class="badge badge-primary badge-pill" th:text="${#arrays.length(followingPeople)}">0</span></button>
                        <a href="#" class="list-group-item list-group-item-action">Photo Gallery</a>
                    </div>
                </div>
                <div class="col-sm-8">
                    <h1 style="text-align: center">Posts</h1>
                    <div class="media border p-3">
                        <img src="img_avatar3.png" alt="John Doe" class="mr-3 mt-3 rounded-circle" style="width:60px;" />
                        <div class="media-body">
                            <h4>John Doe <small><i>Posted on February 19, 2016</i></small></h4>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                            <div class="media p-3">
                                <img src="img_avatar2.png" alt="Jane Doe" class="mr-3 mt-3 rounded-circle" style="width:45px;" />
                                <div class="media-body">
                                    <h4>Jane Doe <small><i>Posted on February 20 2016</i></small></h4>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                                </div>
                            </div>  
                        </div>
                    </div>
                </div>
            </div>

            <!-- The Modal -->
            <div class="modal fade" id="myModal">
                <div class="modal-dialog">
                    <div class="modal-content">

                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">People I'm following</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>

                        <!-- Modal body -->
                        <div class="modal-body">
                            <table class="table table-striped ">
                                <thead class="thead-dark">
                                    <tr>
                                        <th>Name</th>
                                        <th>Started to follow</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody th:if="${#arrays.length(followingPeople) > 0}">
                                    <tr th:each="followingDetail : ${followingPeople}" th:id="${'account-' + followingDetail.followee.id}">
                                        <td><a th:href="${'/accounts/' + followingDetail.followee.profileName}" th:text="${followingDetail.followee.firstName + ' ' + followingDetail.followee.lastName}" >First and last name</a></td>
                                        <td th:text="${#temporals.format(followingDetail.startedToFollow, 'dd-MM-yyyy')}">Date</td>
                                        <td><button class="btn btn-danger" th:onclick="'unfollow(' + ${followingDetail.followee.id} + ')'">Unfollow</button></td> 
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!--<div id="main-user-details">
                <h1>Welcome <span th:text="${firstname +  ' ' + lastname}">first and last name</span></h1>
            </div>
            <div id="following-list">
                <h1>My following list</h1>
                <table th:if="${followingList != null}">
                    <tr th:each="followingDetail : ${followingList}">
                        <td th:text="${followingDetail.followee.firstName} + ' ' + ${followingDetail.followee.lastName}">First and Last name</td>
                        <td th:text="${#temporals.format(followingDetail.startedToFollow, 'dd-MM-yyyy')}">Date of starting to follow</td>
                        <td>
                            <form method="POST" th:action="@{/unfollow?_method=DELETE}">
                                <input type="hidden" name="id" th:value="${followingDetail.followee.id}"/>
                                <input type="submit" value="Unfollow"/>
                            </form>
                        </td>
                        
                    </tr>
                </table>
            </div>-->
        </div>
        <script th:replace="fragments/layout :: context-root"></script>
        <script th:replace="fragments/layout :: user-home-script"></script>
    </body>
</html>
